let arg,startServer,dataFunctions,debug,log,validateNumberOfPlayers,logger;_f4c‍.x([["cli",()=>cli]]);_f4c‍.w("arg",[["default",["arg"],function(v){arg=v}]]);_f4c‍.w("./cli-functions",[["startServer",["startServer"],function(v){startServer=v}]]);_f4c‍.w("../serv/worldModule",[["*",null,function(v){dataFunctions=v}]]);_f4c‍.w("../serv/debug",[["*",null,function(v){debug=v}]]);_f4c‍.w("../common/log",[["default",["log","logger"],function(v){log=logger=v}]]);_f4c‍.w("../common/handlers",[["validateNumberOfPlayers",["validateNumberOfPlayers"],function(v){validateNumberOfPlayers=v}]]);







function parseArgumentsIntoOptions(rawArgs) {
  const args = arg(
    {
      "--help": Boolean,
      "--start": Boolean,
      "--details": Boolean,
      "--update": Boolean,
      "--build": Boolean,
      "--debug": Boolean,
      "-b": "--build",
      "-u": "--update"
    },
    {
      argv: rawArgs.slice(2)
    }
  );
  return {
    help: args["--help"] || false,
    start: args["--start"] || false,
    details: args["--details"] || false,
    update: args["--update"] || false,
    build: args["--build"] || false,
    debug: args["--debug"] || false,
    extraInput: args._[0]
  };
}
       async function cli(args) {
  let options = parseArgumentsIntoOptions(args);
  log(options, "cli", "json");

  if (options.help) {
    log(
      {
        "--help": "Display Commands",
        "--start": "Starts the Server",
        "--details": "Gets World Log",
        "--update": "Gets online World Log",
        "--build": "Reset and Build Initial World"
      },
      "cli",
      "json"
    );
  }
  if (options.start) {
    startServer();
  }
  if (options.details) {
    const world = await dataFunctions.readWorld();
    log(`World State:, ${JSON.stringify(world)}`);
  }
  if (options.build) {
    const maximumNumberOfPlayers = 12; // Need to extract these to a worldCfg file
    const defaultNumberOfPlayers = 12;

    let numberOfPlayers = options.extraInput
      ? options.extraInput
      : defaultNumberOfPlayers;
    numberOfPlayers = validateNumberOfPlayers(
      numberOfPlayers,
      maximumNumberOfPlayers
    );
    numberOfPlayers = numberOfPlayers
      ? numberOfPlayers
      : defaultNumberOfPlayers;

    const world = await dataFunctions.buildWorld(numberOfPlayers);
    log("GENESIS", "cli");
  }

  if (options.update) {
    await dataFunctions.initiateAnUpdatePulse();
  }
  if (options.debug) {
    await debug.buildLandsDebug();
  }
}
